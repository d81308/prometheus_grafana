[[inputs.ping]]
urls = ["amazon.com", "amazon.cn", "amazon.jp", "amazon.hk"]
method = "exec"
count = 5

[inputs.ping.tags]
version = '2'

#---------------------------------------------------------------------------------
# Transforms tag and field values as well as measurement, tag and field names with regex pattern
# {environment="testing",host="telegraf",url="amazon.com",version="2"}
[[processors.regex]]
  namepass = ["ping"]
    # Tag and field conversions defined in a separate sub-tables
  [[processors.regex.tags]]
    ## Tag to change, "*" will change every tag
    key = "url"
    ## Regular expression to match on a tag value
    pattern = "^([a-z]+).*"
    ## Matches of the pattern will be replaced with this string.  Use ${1}
    ## notation to use the text of the first submatch.
    replacement = "${1}"
    # Give result metrics title
    result_key = "service_name_common-in-amazon"